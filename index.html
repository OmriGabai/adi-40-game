<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>עדי נגד הארבעים!</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- GLOBAL MUTE BUTTON -->
  <button id="global-mute-btn" class="global-mute-btn" title="Toggle Sound">
    <svg class="sound-on" viewBox="0 0 24 24" fill="currentColor">
      <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
    </svg>
    <svg class="sound-off" viewBox="0 0 24 24" fill="currentColor" style="display:none">
      <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
    </svg>
  </button>

  <!-- LOADING SCREEN -->
  <div id="loading-screen">
    <div class="loader-spinner"></div>
    <p class="loader-text">טוען...</p>
  </div>

  <!-- EASTER EGG MODAL -->
  <div id="easter-egg-modal" class="easter-egg-modal">
    <div class="easter-egg-content">
      <div class="easter-egg-icon" id="easter-egg-icon">🎉</div>
      <p class="easter-egg-message" id="easter-egg-message" dir="rtl"></p>
      <button class="easter-egg-dismiss">👆 לחצו להמשיך</button>
    </div>
  </div>

  <!-- START SCREEN -->
  <div id="start-screen" class="screen">
    <!-- Floating particles including Adi -->
    <div class="particles">
      <span class="particle">🎈</span>
      <span class="particle">🎉</span>
      <img src="pics/adi.jpg" alt="Adi" class="particle adi-float" onerror="this.style.display='none'">
      <span class="particle">🎊</span>
      <span class="particle">⭐</span>
      <span class="particle">🎈</span>
    </div>

    <div class="logo-container">
      <div class="logo-glow"></div>
      <h1><span class="title-line1">עדי נגד</span><span class="title-line2">הארבעים!</span></h1>
      <div class="logo-subtitle">
        <span class="mazal-tov">🎂 מזל טוב 🎂</span>
      </div>
    </div>
    <p class="subtitle">עזרו לעדי לשרוד את גיל 40!</p>

    <div class="instructions">
      <p>✅ לחצו על <span class="good">מתנות ומשפחה</span> לנקודות</p>
      <p>❌ הימנעו מ<span class="bad">סימני הזדקנות</span>!</p>
      <p>⚠️ היזהרו מפיץ החתול ⚠️</p>
    </div>

    <div class="name-input">
      <input type="text" id="player-name" placeholder="הכניסו את השם שלכם" maxlength="15">
    </div>

    <button id="start-btn" class="btn-primary">התחילו לשחק</button>

    <button id="leaderboard-btn" class="btn-secondary">טבלת המובילים</button>
  </div>

  <!-- PRE-GAME COUNTDOWN SCREEN -->
  <div id="countdown-screen" class="screen">
    <div class="countdown-content">
      <div class="countdown-section good-section">
        <h3>✅ לחצו לנקודות!</h3>
        <div class="item-row">
          <img src="pics/gift.svg" alt="Gift" class="countdown-item">
          <img src="pics/cake.svg" alt="Cake" class="countdown-item">
          <img src="pics/balloon.svg" alt="Balloon" class="countdown-item">
        </div>
        <div class="item-row">
          <img src="pics/gal.jpg" alt="Gal" class="countdown-item family">
          <img src="pics/bar.jpg" alt="Bar" class="countdown-item family">
          <img src="pics/liv.jpg" alt="Liv" class="countdown-item family">
          <img src="pics/eran.JPG" alt="Eran" class="countdown-item family">
        </div>
      </div>

      <div class="countdown-section bad-section">
        <h3>❌ הימנעו מאלה!</h3>
        <div class="item-row">
          <img src="pics/forty.svg" alt="40" class="countdown-item">
          <img src="pics/glasses.svg" alt="Glasses" class="countdown-item">
          <img src="pics/grayhair.svg" alt="Grandma" class="countdown-item">
          <img src="pics/pills.svg" alt="Pills" class="countdown-item">
        </div>
      </div>

      <div id="countdown-text" class="countdown-text">התכוננו!</div>
      <button id="tap-to-start" class="tap-to-start">👆 לחצו להתחיל!</button>
    </div>
  </div>

  <!-- PRE-PITZ COUNTDOWN SCREEN -->
  <div id="pitz-countdown-screen" class="screen">
    <div class="countdown-content">
      <h2 class="pitz-incoming">🐱 פיץ מתקרב! 🐱</h2>
      <img src="pics/pitz.jpg" alt="Pitz" class="pitz-preview">
      <p class="pitz-instruction">לחצו כמה שיותר מהר!</p>
      <div id="pitz-countdown-text" class="countdown-text">התכוננו!</div>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game-screen" class="screen">
    <div class="game-header">
      <div class="score-display">
        <span class="label">ניקוד</span>
        <span id="score">0</span>
      </div>
      <div class="timer-display">
        <span class="label">זמן</span>
        <span id="timer">60</span>
      </div>
    </div>

    <div id="message-popup" class="message-popup"></div>

    <div id="game-board" class="game-board">
      <div class="hole" data-hole="0"><div class="character"></div></div>
      <div class="hole" data-hole="1"><div class="character"></div></div>
      <div class="hole" data-hole="2"><div class="character"></div></div>
      <div class="hole" data-hole="3"><div class="character"></div></div>
      <div class="hole" data-hole="4"><div class="character"></div></div>
      <div class="hole" data-hole="5"><div class="character"></div></div>
      <div class="hole" data-hole="6"><div class="character"></div></div>
      <div class="hole" data-hole="7"><div class="character"></div></div>
      <div class="hole" data-hole="8"><div class="character"></div></div>
    </div>
  </div>

  <!-- PITZ BONUS ROUND SCREEN -->
  <div id="pitz-screen" class="screen">
    <div class="pitz-header">
      <h2>🐱 פיץ הופיע! 🐱</h2>
      <p>לחצו על החתול כמה שיותר מהר!</p>
      <div class="pitz-timer">
        <span id="pitz-time">5</span> שניות
      </div>
    </div>

    <div id="pitz-taps" class="pitz-taps">0</div>
    <div id="pitz-message" class="pitz-message">לחצו לחצו לחצו!</div>

    <div id="pitz-cat" class="pitz-cat">
      <img src="pics/pitz.jpg" alt="פיץ החתול" class="cat-photo">
      <span class="cat-name">פיץ</span>
    </div>
  </div>

  <!-- END SCREEN -->
  <div id="end-screen" class="screen">
    <h2 id="end-title">🎉 סיום המשחק! 🎉</h2>
    <p id="end-message"></p>

    <div class="final-scores">
      <div class="score-row">
        <span>ניקוד משחק:</span>
        <span id="final-game-score">0</span>
      </div>
      <div class="score-row">
        <span>בונוס פיץ:</span>
        <span id="final-pitz-score">0</span>
      </div>
      <div class="score-row total">
        <span>סה״כ:</span>
        <span id="final-total-score">0</span>
      </div>
    </div>

    <div id="saving-indicator" class="saving">שומר ניקוד...</div>

    <button id="end-leaderboard-btn" class="btn-leaderboard">
      <span class="btn-icon">🏆</span>
      <span class="btn-label">איפה את/ה בדירוג?</span>
      <span class="live-badge">LIVE</span>
    </button>

    <button id="play-again-btn" class="btn-secondary">שחקו שוב</button>
  </div>

  <!-- LEADERBOARD SCREEN -->
  <div id="leaderboard-screen" class="screen">
    <div class="leaderboard-header">
      <h2>🏆 טבלת המובילים 🏆</h2>
      <div class="live-indicator">
        <span class="live-dot"></span>
        <span class="live-text">LIVE</span>
      </div>
    </div>

    <div id="leaderboard-list" class="leaderboard-list">
      <p class="loading">טוען ניקוד...</p>
    </div>

    <button id="back-btn" class="btn-secondary">חזרה</button>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="game.js"></script>
</body>
</html>
